{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Run agent for ESP32",
            "type": "shell",
            "command": "bash -c 'cd ${workspaceFolder} && source install/local_setup.bash && ros2 run micro_ros_agent micro_ros_agent serial --dev /dev/serial/by-id/usb-Silicon_Labs_CP2102_USB_to_UART_Bridge_Controller_0001-if00-port0'",
            "problemMatcher": []
        },
        {
            "label": "Check for missing dependencies",
            "type": "shell",
            "command": "bash -c 'cd ${workspaceFolder} && source /opt/ros/kilted/setup.bash && rosdep install -i --from-path src --rosdistro kilted -y'",
            "presentation": {
                "reveal": "silent",
                "revealProblems": "onProblem",
                "close": true
            },
            "problemMatcher": []
        },
        {
            "label": "Build my_package",
            "type": "shell",
            "command": "bash -c 'cd ${workspaceFolder} && source /opt/ros/kilted/setup.bash && colcon build --symlink-install --packages-select my_bot'",
            "problemMatcher": [],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "reveal": "always",
                "revealProblems": "onProblem",
                "close": true
            },
            "dependsOn": [
                "Check for missing dependencies"
            ]
        },
        {
            "label": "Robot state publisher",
            "type": "shell",
            "command": "bash -c 'cd ${workspaceFolder} && source install/local_setup.bash && ros2 launch my_bot robot_state_publisher_launch.py'",
            "presentation": {
                "reveal": "silent",
                "close": true
            },
            "problemMatcher": []
        },
        {
            "label": "Robot state publisher (Sim mode)",
            "type": "shell",
            "command": "bash -c 'cd ${workspaceFolder} && source install/local_setup.bash && ros2 launch my_bot rsp.launch.py use_sim_time:=true'",
            "presentation": {
                "reveal": "silent",
                "close": true
            },
            "problemMatcher": []
        },
        {
            "label": "Joint state publisher GUI",
            "type": "shell",
            "command": "bash -c 'cd ${workspaceFolder} && source install/local_setup.bash && ros2 run joint_state_publisher_gui joint_state_publisher_gui'",
            "presentation": {
                "reveal": "silent",
                "close": true
            },
            "problemMatcher": []
        },
        {
            "label": "RViz2",
            "type": "shell",
            "command": "bash -c 'cd ${workspaceFolder} && source /opt/ros/kilted/setup.bash && rviz2'",
            "presentation": {
                "reveal": "never",
                "close": true
            },
            "problemMatcher": []
        },
        {
            "label": "Gazebo",
            "type": "shell",
            "command": "bash -c 'cd ${workspaceFolder} && source install/local_setup.bash && ros2 launch my_bot gazebo.launch.py'",
            "presentation": {
                "reveal": "never",
                "close": true
            },
            "problemMatcher": []
        },
        {
            "label": "Spawn entity in Gazebo",
            "type": "shell",
            "command": "bash -c 'cd ${workspaceFolder} && source install/local_setup.bash && ros2 launch ros_gz_sim gz_spawn_model.launch.py world:=empty topic:=robot_description entity_name:=bot_name x:=5.0 y:=5.0 z:=0.5'",
            "presentation": {
                "reveal": "never",
                "close": true
            },
            "problemMatcher": []
        },
        {
            "label": "Launch sim",
            "type": "shell",
            "command": "bash -c 'cd ${workspaceFolder} && source /opt/ros/kilted/setup.bash && source install/local_setup.bash && ros2 launch my_bot launch_sim.launch.py'",
            "presentation": {
                "reveal": "never",
                "close": false
            },
            "problemMatcher": []
        },
        {
            "label": "Install MicroROS setup",
            "type": "shell",
            "command": "bash -c 'cd ${workspaceFolder} && source /opt/ros/$ROS_DISTRO/setup.bash && git clone -b $ROS_DISTRO https://github.com/micro-ROS/micro_ros_setup.git src/micro_ros_setup && rosdep update && rosdep install --from-paths src --ignore-src -y && colcon build --symlink-install'",
            "presentation": {
                "reveal": "always",
                "close": false
            },
            "problemMatcher": []
        },
        {
            "label": "Install MicroROS agent",
            "type": "shell",
            "command": "bash -c 'cd ${workspaceFolder} && source install/local_setup.bash && ros2 run micro_ros_setup create_agent_ws.sh && ros2 run micro_ros_setup build_agent.sh'",
            "presentation": {
                "reveal": "always",
                "close": false
            },
            "problemMatcher": []
        }
    ]
}